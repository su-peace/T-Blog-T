---
date: 2025-11-03
tags:
  - 语言
  - 计算机科学与技术
---
---

如果要定义一个常量，有以下几种方法：
- **使用`const`关键字**：`const double PI = 3.14159;`该代码定义了一个`double`常量`PI`等于3.14159
- ***使用`constexpr`关键字（推荐优先使用）***：`cconstexpr int num = 100;`该用法类似`const`,不同的是它可以在编译时定义一个函数用于运算：`constexpr int sqare( int x ){return x*x;}`该代码定义了一个`sqare`函数用于计算平方
	- 使用`constexpr`和平常定义函数时的区别是：可以使定义的函数可以在编译时和运行时使用，
	- 好处：
		- 在运行的时候可以直接使用
		- 可以提升性能
		- 可以在编译的时候发现错误，避免运行的时候崩溃
		- 优化内存
		- 便于维护，便于优化
- **使用`#define`预处理指令**：`#define PI 3.14159`实现和`const`一样的效果，但是**不建议在现代C++中使用**

---
#  **数组**： 

1. 数组从0开始编号，因此，像`float ch[3]`是创建了一个名为`ch`的`float`变量，并且`ch`中包含4个元素，第一个元素为`ch[0]`
2. `sizeof`用于数组时，计算的将是整个数组的长度
3. C++初始化时可以省略`=`,例如：`float data[100] {};`此时所有数据都被初始化为0
4. C++中禁止缩窄转换，例如：`long data[] = {25,14,3.0};`该代码无法编译，因为将`3.0`这个浮点数转换为整型是缩窄操作
5. 如果定义时未给定具体的元素数，C++程序将自动计算元素个数
  
 以下是例子：  
>[!code]-
>```C++
>#incldue <iostream>
>int main()
>	{
>	using namespace std;
>	int num[] = {4,6,7,8};
>	cout<<sizeof(num)<<endl;
>	system("pause);
>	return 0;
>	}
>```
>这块代码块的输出是16，恰好是`num[]`的长度
  

#  **字符串**： 

1. 对于一行的输入：`getline()`，该函数读取一整行，通过回车键输入的换行符来确定输入的结尾，具体的调用方法见下面这行代码：
```C++
 cin.getline(name,20);
 //这条代码的意思是将输入的数据存储到包含20个元素的name数组中
 //getline()还可以接受第三个参数，详见后文
``` 

2. **混合输入数字和字符**：
- 丢弃换行符：
	```C++
	cin>>year;
	cin.get();
	```  
	
	或者
	
	```C++
	(cin >> year).get;
	``` 
	
	以上两种方法都可以读取并丢弃一个数据，一般在一串输入后用于**丢弃换行符**

# **string类型**： 
   
1. 

# **结构类型**： 
   
1. 结构可以将string类型作为结构的成员
  
# **共用体**：  
  
1. 
  
# **枚举**： 
   
1. 
  
# **指针**：  

1. `*`运算符被称为**间接值**或**解除引用运算符**，举例如下
	- 假如`data`是一个指针，也就是说`data`存的数据就是一个地址，而`*data`就表示存储在`data`的值，也就是说`*data`就和一个常规变量一样  
	- 类似的，**针对结构**，我们**使用`->`成员访问运算符**来访问结构成员
		- 例如：假设结构变量`Person`中包含一个`name`和`age`成员，假如`Person* ptr = &person`创建一个指针，**访问的时候可以直接使用`ptr->name = 'Mark'`进行访问。**
2.  **指针的声明**：  
>[!code1]-
>  
>```C++
>#include <iostream>
>int main()
>{
>	using namespace std;
>	int value = 6;           
>	// 定义一个整型变量value，值为6
>	   
>	int *data = &value;      
>	// 定义指针data，指向value的地址
>	   
>	cout << "value的值是" << value << endl;
>	// 输出value的值：6
>	cout << "*data的值是" << *data << endl;          
>	// 输出指针指向的值：6
>	cout << "data的值是" << data;                  
>	// 输出指针的值（即value的地址）
>	
>	system("pause");
>	return 0;
>}
>```  
>  


上面`Code1`的输出是：  

```text
value的值是6
*data的值是6
data的值是0x70fe04
```  

从这里我们可以看出`data`是地址，而`*data`的值是一个数，并且恰恰是value的值，也就是说，`data`是`value`的地址，而`*data`是`value`的值  

3. **指针的运算**：

	- 对于`double * pw = wages;`（`wages`是一个数组，包含3个元素）  
	
		- `pw`指的是一个地址，相应的，`pw+1`对应的就是下一个地址
			- 假设`pw`的地址是`0x5ffe40`，那么`pw+1`的地址就是`0x5ffe48`。注意到第二个地址相对于第一个地址多了8，**这和`pw`的类型有关**，如果`pw`是`double`类型，那么地址加8，如果是`int`类型，那么地址加4  
			
		- **注意**：如果要显示`pw+1`的地址对应的元素，**需要将`pw+1`框起来，并加上`*`解引用运算符**，例如：`*(pw+1)`这样显示的就是`pw+1`对应的元素  
		
		- **对于数组**：C++将`num[1]`看作`*(num+1)`，由此我们可以知道，对于数组名`num`指的是数组的第一个元素

<br>

4. **内存的分配与释放**：  
	- **内存的分配**： 
		- 我们可以使用`malloc()`来进行内存的分配，这一操作在C中也可以使用  
		- 在C++中更常用、也是更好用的是使用运算符`new`来进行分配，`new`将会根据数据的类型自动进行内存的分配
			- **`new`运算符**：使用`new`创建动态数组，只需要把数组的元素类型和元素数目告诉`new`
			- 例如：`int *num = new int[10]`，这行代码创建了一个包含10个`int`元素的数组，并且`new`运算符返回第一个元素的地址给`num`
			- **释放内存**：对于`new`创建的数组，应该使用`delete [] num`这样的语法格式释放内存
	- **内存的释放**： 
		- 我们使用`delete`来释放内存
		- **注意**：`delete`只是释放内存，并不会删除指针，在释放后可以将原来的指针重新指向另一个内存块。
		- 例如：`delete data;`,这行代码的意思是释放`data`的内存，而`delete *data;`这段代码的操作是错误的
		- ==**最重要的一点**：**new和delete要配对的使用**，也就是，对于一个指针，使用new分配内存后，可以执行一次delete操作，进行释放内存，**千万不要对已经释放过的内存进行二次释放**==

<br>

  
5. **自动存储、静态存储和动态存储**：在C++中存在三种管理内内存的方式：自动存储（栈）、静态存储和动态存储（堆），下面对他们分别介绍：
	1. **自动存储（栈）**：在函数内部定义的变量，在一个函数开始运行时创建，结束运行时自动销毁。该变量称为自动变量，该变量存储在栈中
		- **特点**：
			- 自动分配与释放 :即上文的函数开始运行时创建，结束运行时销毁（**函数，不是程序**）
			- 速度快
			- 大小有限：栈空间通常较小
			- 局部性：遵循**后进先出**原则，即最后设置的元素，最先移除  
	2. **静态存储**：在程序开始运行时分配，程序结束时释放内存
		- **如何声明**：
			- 在函数外部定义，例如：在所有函数外部直接声明变量，**形同常规的变量/常量声明**`int num = 0;`[^1]或者`const string name = "MyApplication";`
			- 在声明变量的时候使用`static`关键字，例如
				`static double num = 56.50;`  
				- `static`变量只可以初始化一次，例如，上面`num`被初始化为56.50，如果之后修改了`num`的值，下一次就不可以再初始化为56.50，而是保持修改后的值
		- **如何使用**：
			- **全局变量（需谨慎使用）**：
				1. **对于单个文件**：
					- 在函数外部声明变量，即可在后续所有函数中使用
					- **全局变量**可以被任意函数修改，除非被声明为常量或被声明为`static`且在其他文件中无法访问
				2. **对于多个文件**：
					1. 先在头文件中**使用`extern`声明**局部变量：`extern int num;`
					2. 在源文件中定义（在函数外面定义）：`int num = 1;`定义的时候需要使用头文件，例如：假设头文件被命名为`config.h`，就需要使用`#include 'config.h'`来使用头文件
			- **静态局部变量**：
				- 在函数内部声明的静态变量
	3. **动态存储（堆）**：在程序运行时动态分配和释放内存
		1. 最基础的内存管理：使用`new`和`delete`来实现内存的分配和释放
		2. 使用智能指针进行分配


>[!tip]-
>1. 数组存在两个替代品：`vector`和`array`，`vector`需要使用头文件`vector`，而`array`不需要，它也包含在头文件`std`中
>2. 对于结构，可以使用`.`来访问结构中的成员，例如`student.age`代表的是结构`student`中的`age`对象
>3. 在C++中，`->`也是一个运算符，用于通过指针访问对象成员的运算符
>	>语法：`pointer->member`等价于`(*pointer).number`，即结构`pointer`中的`number`成员
>4. 如果没有标注函数的返回类型，则默认返回值为`int`类型

>[!补充]-
>5. `strcpy()`：C中用于字符串的复制
>	>用法：`strcpy(ch2,ch1);`将`ch1`的字符串复制给`ch2`
>6. `strlen()`：返回字符串的长度，不包括空字符
>	>用法：`strlen(ch1);`这个代表的是字符串`ch1`的长度


# Q&A

[^1]:  即便不手动初始化为0,程序也会自动初始化,但是最好还是手动
