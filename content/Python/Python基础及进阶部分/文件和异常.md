---
date: 2025-12-15
tags:
  - 计算机科学与技术
  - Python
  - 语言
---
# 文件的读取

###### 读取整个文件

```python
with open('example.txt') as file_object
	contents = file_object.read()
	print(contents.rstrip())#rstrip()函数删去末尾的空格
```

- `open()`函数：**接受**需要打开文件的文件名，他是在程序所在的目录中寻找指定的文件，**返回**一个表示文件`example.txt`的对象
	- 与`C++`类似，我们需要使用`close()`函数关闭文件 
	- `open()`函数还可以接受：类似`text\example.txt`的名字
- `with`关键字：在不需要访问文件的时候将其关闭
- `read()`：读取文件的所有内容

<br>

###### 逐行读取

```python
with open('example.txt') as file_object:
	for line in file_object:
		print(line) 
```

以上代码会把`example.txt`文件里的内容逐行打印

>[!tip] 使用`with`关键字时，`open()`返回的文件对象只在`with`代码块内使用，如果要在`with`之外使用，可以先把内容存储在列表中，以下是方法
>```python
>with open('example.txt') as file_object:
>	# 使用 `readlines()`方法从文件中读取每一行
>	lines = file_object.readlines()
>```

<br>

>[!attention] 
>读取文本文件时，Python将其中的所有文本都解读为字符串
>
>如果读取的是数字，并要将其作为数值使用，就必须使用函数`int()`将其转换为整数，或者使用`float()`转换为浮点数

<br>

###### 读取大型文件
 
使用上面的任意一个代码块都可以读取，只要系统的内存足够的多，想处理多少数据都可以

# 文件的写入

###### 写入空文件

```python
# 使用只写模式打开example.txt文件，并写入hello,world
with open('example.txt','w') as f:
	f.write('hello,world')
	
# 使用只读模式打开example.txt文件，并将内容打印
with open('example.txt','r') as f:
	print(f.read())
```

<br>

> 下面开始解释代码

- `open('example.txt','w')`：`example.txt`是要打开的文件名，`w`是对文件的操作，这样的包括：

| 模式     | 描述     | 文件指针 | 文件存在     |
| ------ | ------ | ---- | -------- |
| `'r'`  | 只读（默认） | 开头   | 必须存在     |
| `'r+'` | 读写     | 开头   | 必须存在     |
| `'w'`  | 只写     | 开头   | 创建新文件/清空 |
| `'w+'` | 读写     | 开头   | 创建新文件/清空 |
| `'a'`  | 追加写    | 末尾   | 创建新文件    |
| `'a+'` | 追加读写   | 末尾   | 创建新文件    |
| `'x'`  | 创建写    | 开头   | 必须不存在    |
| `'x+'` | 创建读写   | 开头   | 必须不存在    |
- `write()`：将一个字符串写入文件

>[!tip] Python只能将字符串写入文本文件

# 异常

>[!tip] Python使用被称为**异常**的特殊对象来管理程序执行期间**发生的错误**

- 如果你编写了处理该异常的代码，程序将继续运行； 如果你未对异常进行处理，程序将停止，并显示一个**traceback**，其中包含有关异常的报告。

- 异常是使用`try-expect`代码块处理的，`try-except`代码块让Python执行指定的操作，同时告诉Python发生异常时怎么办
	- 类似C中的`switch`，发生情况1，该怎么处理，情况2怎么处理

<br>

```python
try:
	answer = num1 / num2
expect ZeroDivisionError:
	print("不能除以0！！！")
else:
	print(answer)
```

- 如果`num1 / num2`运行起来没问题，程序将跳过`expect`语句，执行`else`语句
- 如果没有加`else`语句也没关系，程序会自动向下运行
- 使用`try-expect`处理异常的时候，**必须把可能引发异常的代码放在 `try` 块中**

